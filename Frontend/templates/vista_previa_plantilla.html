<!-- filepath: c:\Users\chang\Downloads\SIGEA\Frontend\templates\vista_previa_plantilla.html -->
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Vista previa de plantilla</title>
  <link rel="icon" href="{{ url_for('static', filename='images/SIGEA_LOGOTIPO200.png') }}" type="image/x-icon">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,700" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/plantillas_oficios.css') }}">
</head>
<body>
  <div class="sigea-header">SIGEA</div>
  <div class="plantilla-container preview-container">
    <h2>Vista previa de la plantilla</h2>
    <form method="post" action="{{ url_for('descargar_plantilla_editada') }}">
      {% for parrafo in contenido %}
        <div class="preview-paragraph">
          {% set texto = parrafo.texto %}
          {% for campo in parrafo.campos %}
            {% set campo_id = campo.replace('{','').replace('}','').replace(' ','').replace('.', '_') %}
            {% set input_html = '<input type="text" name="' ~ campo_id ~ '" class="campo-editable" value="' ~ campo ~ '">' %}
            {% set texto = texto.replace(campo, input_html) %}
          {% endfor %}
          {{ texto|safe }}
        </div>
      {% endfor %}
      <div class="acciones">
        <button type="submit">Descargar plantilla editada</button>
        <a href="{{ url_for('subir_plantilla') }}"><button type="button">Cancelar</button></a>
      </div>
      <input type="hidden" name="plantilla_path" value="{{ plantilla_path }}">
    </form>
  </div>
</body>
</html>